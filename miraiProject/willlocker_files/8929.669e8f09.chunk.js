"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8929],{38741:(e,n,i)=>{i.d(n,{G:()=>k});var a=i(96540),l=i(64830),t=i(27721),o=i(95964),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TagViewerEdge"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"tagSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tagFromSlug"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tagSlug"},value:{kind:"Variable",name:{kind:"Name",value:"tagSlug"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Tag"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isFollowing"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]}}]}}]},r=i(28263),u=i(51260),m=i(79959),g=i(27566),k=function(e){var n=e.scale,i=e.tagSlug,k=e.tagTitle,c=e.tagId,s=e.buttonStyle,v=(0,r.C)().openModal,f=(0,u.au)(),S=(0,t.R)(),p=S.value,N=S.loading,y=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,a=(0,o.IT)(d,{variables:{tagSlug:n},ssr:!1,skip:!n||i}),l=a.loading,t=a.error,r=a.data;return l?{loading:l}:t?{error:t}:{viewerEdge:null==r||null===(e=r.tagFromSlug)||void 0===e?void 0:e.viewerEdge}}(i),T=y.loading,w=y.viewerEdge,F=!(null==w||!w.isFollowing),b=(0,l.k)({tagSlug:i,displayTitle:null!=k?k:"",followSource:"tag_header"}).followTag,_=(0,l.l)({tagSlug:i,displayTitle:null!=k?k:"",followSource:"tag_header"}).unfollowTag,O=(0,a.useCallback)((function(){c&&k&&i&&v({operation:"register",susiEntry:"follow_tag",step:"SIGNUP_OPTIONS",topic:{id:c,name:k},actionUrl:(0,m.ST)(f("SubscribeTagAndRedirect",{tagSlug:i}),{followSource:"topics_v2"})})}),[v,c,k,i,f]),D=(0,a.useCallback)((function(){F?_():b()}),[F,_,b]);return T||N?null:p||c&&k&&i?a.createElement(g.Wc,{scale:n,onClick:D,openSusiModal:O,isFollowing:F,buttonStyle:s,entityType:g.Jp.Topic}):null}},22381:(e,n,i)=>{i.d(n,{Z:()=>u});var a=i(96540),l=i(34317),t=i(49287),o=i(79429),d=i(50684),r=i(39160),u=function(e){var n=e.tagSlug,i=(0,l.$L)(),u=(0,d.MW)(),m=(0,r.d4)((function(e){return e.navigation.referrer})),g=(0,r.d4)((function(e){return e.navigation.currentLocation})),k=(0,t.jI)(),c={referrer:m||g,referrerSource:u,source:k},s=a.useCallback((function(){i.event("tag.clicked",{tagSlug:n},{overrideData:c})}),[n,i,k,u,c]);return{containerRef:(0,o.s)({onPresentedFn:function(){i.event("tag.presented",{tagSlug:n,source:k,trackingV2:!0},c)}}),handleClick:s}}},64830:(e,n,i)=>{i.d(n,{k:()=>w,l:()=>F});var a,l=i(64467),t=i(60436),o=i(5544),d=i(55364),r=i.n(d),u=i(95420),m=i(67194),g=i(27721),k=i(15473),c=i(34317),s=i(49287),v=i(50684),f=i(39160),S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"FollowTag"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"tagSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"followTag"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"tagSlug"},value:{kind:"Variable",name:{kind:"Name",value:"tagSlug"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TagFollowButtonSignedIn_tag"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"TagFollowButtonSignedIn_tag"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Tag"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"displayTitle"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isFollowing"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnfollowTag"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"tagSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unfollowTag"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"tagSlug"},value:{kind:"Variable",name:{kind:"Name",value:"tagSlug"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TagFollowButtonSignedIn_tag"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"TagFollowButtonSignedIn_tag"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Tag"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"displayTitle"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isFollowing"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};function N(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,a)}return i}function y(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?N(Object(i),!0).forEach((function(n){(0,l.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}!function(e){e.FOLLOW_TAG="followTag",e.UNFOLLOW_TAG="unfollowTag"}(a||(a={}));var T=function(e,n,i){var l={};return l[e]={id:n,__typename:"Tag",displayTitle:i,viewerEdge:{id:"optimistic-TagViewerEdge:".concat(n),isFollowing:e===a.FOLLOW_TAG,__typename:"TagViewerEdge"}},l},w=function(e){var n=e.tagSlug,i=e.displayTitle,l=e.followSource,d=(0,g.R)().value,p=(null==d?void 0:d.id)||"",N=(0,c.$L)(),y=(0,v.MW)(),w={referrer:(0,f.d4)((function(e){return e.navigation.referrer})),source:(0,s.jI)(),referrerSource:y},F=(0,u.n)(S,{variables:{userId:p,tagSlug:n},optimisticResponse:T(a.FOLLOW_TAG,n,i),update:function(e){e.modify({id:"User:".concat(p),fields:{missionControl:(0,k.A4)("followedTags",!0),followedTags:function(e,i){var a=i.readField;if(!(0,m.A_)(e)&&e){var l=e;return l.tags.find((function(e){return a("id",e)===n}))?l:r()({},l,{tags:[(0,m.WU)("Tag:".concat(n))].concat((0,t.A)(l.tags))})}return e}}}),e.modify({id:"Tag:".concat(n),fields:{followerCount:function(e){return e+1}}})},onCompleted:function(){N.event("tag.followed",{tagSlug:n,followSource:l,trackingV2:!0},w)}});return{followTag:(0,o.A)(F,1)[0]}},F=function(e){var n=e.tagSlug,i=e.displayTitle,l=e.followSource,t=(0,g.R)().value,d=(null==t?void 0:t.id)||"",r=(0,c.$L)(),S=(0,v.MW)(),N={referrer:(0,f.d4)((function(e){return e.navigation.referrer})),source:(0,s.jI)(),referrerSource:S},w=(0,u.n)(p,{variables:{userId:d,tagSlug:n},optimisticResponse:T(a.UNFOLLOW_TAG,n,i),update:function(e){e.modify({id:"User:".concat(d),fields:{missionControl:(0,k.A4)("followedTags",!1),followedTags:function(e,i){var a=i.readField;if(i.storeFieldName.includes("refineFollowedTags"))return e;if(!(0,m.A_)(e)&&e){var l=e;return y(y({},l),{},{tags:l.tags.filter((function(e){return a("id",e)!==n}))})}return e}}}),e.modify({id:"Tag:".concat(n),fields:{followerCount:function(e){return e>1?e-1:0}}})},onCompleted:function(){r.event("tag.unfollowed",{tagSlug:n,followSource:l,trackingV2:!0},N)}});return{unfollowTag:(0,o.A)(w,1)[0]}}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/8929.669e8f09.chunk.js.map